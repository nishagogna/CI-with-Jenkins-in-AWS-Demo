pipeline{
  agent any
  
stages {


  stage ('Build') {
    steps {    
       sh '''
      export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
      mvn package
      '''       
    }
    
      stage('Sonarqube') {
              environment {
              scannerHome = tool 'sonarqube-4.3'
              }
        steps {
              withSonarQubeEnv('sonar') {
              sh "${scannerHome}/bin/sonar-scanner -Dsonar.project.settings=${WORKSPACE}/sonar-project.properties"
              }
          }
    }
    
//post {
      //always {
      //archiveArtifacts artifacts: 'project/target/*.war', followSymlinks: false onlyIfSuccessful: true
      
    
  }
}
}
